diff --git a/ex.c b/ex.c
index c5b722d..d53861e 100644
--- a/ex.c
+++ b/ex.c
@@ -398,6 +398,19 @@ static int ec_edit(char *loc, char *cmd, char *arg)
 		ex_show(msg);
 	} else
 		ex_show("read failed");
+	if (lbuf_len(xb) > 0) {
+		int adv = 0;
+		while (lbuf_len(xb) >= adv && lbuf_buf(xb)[adv][0] == '\n')
+			adv++;
+		char *langs[] = {"/bin/sh", "/bin/python"};
+		char *types[] = {"sh", "py"};
+		for (int i = 0; i < LEN(langs); i++) {
+			if (strstr(lbuf_buf(xb)[adv], langs[i])) {
+				strcpy(ex_buf->ft, types[i]);
+				syn_setft(ex_buf->ft);
+			}
+		}
+	}
 	free(path);
 	return 0;
 }
diff --git a/reindex.sh b/reindex.sh
index 0b047d8..a51e7f3 100755
--- a/reindex.sh
+++ b/reindex.sh
@@ -1,9 +1,11 @@
 for p in *.patch
 do
+	echo "PATCH: $p"
 	patch < $p
 	git diff > ./tmp
-	patch -R < $p
+	patch -R < $p &>/dev/null
 	cp tmp $p
 	git add $p
+	echo "END PATCH: $p"
 done
 rm tmp *.orig
